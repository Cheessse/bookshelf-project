{"version":3,"file":"shopping-list-d7e21cfd.js","sources":["../../src/js/header.js","../../src/js/support.js","../../src/js/home-ukraine.js","../../src/js/local-storage.js","../../src/js/modal-window.js","../../src/img/symbol-defs.svg#icon-amazon","../../src/img/symbol-defs.svg#icon-ibooks","../../src/img/symbol-defs.svg#icon-trash","../../src/js/shopping-list.js"],"sourcesContent":["const themeToggle = document.getElementById(\"theme-toggle\");\nconst body = document.body;\n\nthemeToggle.addEventListener(\"change\", () => {\n    if (themeToggle.checked) {\n        body.classList.add(\"dark\");\n        body.classList.remove(\"light\");\n    } else {\n        body.classList.add(\"light\");\n        body.classList.remove(\"dark\");\n    }\n});\n\n//=================================menu===============//\n\n\n(() => {\n    const mobileMenu = document.querySelector('.js-menu-container');\n    const openMenuBtn = document.querySelector('.js-open-menu');\n    const closeMenuBtn = document.querySelector('.js-close-menu');\n    const closeMenuLink = document.querySelectorAll('.header-link');\n  \n    const toggleMenu = () => {\n      const isMenuOpen =\n        openMenuBtn.getAttribute('aria-expanded') === 'true' || false;\n      openMenuBtn.setAttribute('aria-expanded', !isMenuOpen);\n      mobileMenu.classList.toggle('is-open');\n  \n      const scrollLockMethod = !isMenuOpen\n        ? 'disableBodyScroll'\n        : 'enableBodyScroll';\n      bodyScrollLock[scrollLockMethod](document.body);\n    };\n    closeMenuLink.forEach(item => item.addEventListener('click', toggleMenu));\n    openMenuBtn.addEventListener('click', toggleMenu);\n    closeMenuBtn.addEventListener('click', toggleMenu);\n  \n    // Close the mobile menu on wider screens if the device orientation changes\n    window.matchMedia('(min-width: 768px)').addEventListener('change', e => {\n      if (!e.matches) return;\n      mobileMenu.classList.remove('is-open');\n      openMenuBtn.setAttribute('aria-expanded', false);\n      bodyScrollLock.enableBodyScroll(document.body);\n    });\n  })();","export const support = [\n  {\n    title: 'Save the Children',\n    url:\n      'https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis',\n    img: '../img/SaveChildren.png',\n    img2x: '../img/SaveChildren2x.png',\n  },\n  {\n    title: 'Project HOPE',\n    url: 'https://www.projecthope.org/country/ukraine/',\n    img: './img/projectHOPE.png',\n    img2x: './img/projectHOPE2x.png',\n  },\n  {\n    title: 'UNITED24',\n    url: 'https://u24.gov.ua/uk',\n    img: './img/United24.png',\n    img2x: './img/United24_2x.png',\n  },\n  {\n    title: 'International Medical Corps',\n    url: 'https://internationalmedicalcorps.org/country/ukraine/',\n    img: './img/MedicalCorps.png',\n    img2x: './img/MedicalCorps2x.png',\n  },\n  {\n    title: 'Medicins Sans Frontieres',\n    url: 'https://www.msf.org/ukraine',\n    img: './img/MedicalSans.png',\n    img2x: './img/MedicalSans2x.png',\n  },\n  {\n    title: 'RAZOM',\n    url: 'https://www.razomforukraine.org/',\n    img: './img/RAZOM.png',\n    img2x: './img/RAZOM2x.png',\n  },\n  {\n    title: 'Action against hunger',\n    url: 'https://www.actionagainsthunger.org/location/europe/ukraine/',\n    img: './img/AgainstHunger.png',\n    img2x: './img/AgainstHunger2x.png',\n  },\n  {\n    title: 'World vision',\n    url: 'https://www.wvi.org/emergencies/ukraine',\n    img: './img/WorldVision.png',\n    img2x: './img/WorldVision.png',\n  },\n  {\n    title: 'Serhiy Prytula Charity Foundation',\n    url: 'https://prytulafoundation.org/en',\n    img: './img/SergiyPrytula.png',\n    img2x: './img/SergiyPrytula2x.png',\n  },\n]","import Swiper from 'swiper';\n\nimport { support } from '../js/support';\n\nconst swiperOptions = {\n    direction: 'vertical',\n    navigation: {\n        nextEl: 'swiper-btn-next'\n    },\n     \n    rewind: true,\n    allowTouchMove: false,\n    spaceBetween: 20,\n    slidesPerView: 'auto',\n    slidesPerGroup: 6,\n};\n\nconst swiper = new Swiper('.swiper', swiperOptions);\n\nconst refs = {\n    nextBtn: document.querySelector('.swiper-button-next'),\n    list: document.querySelector('.swiper-wrapper'),\n    btn: document.querySelector('.support-btn'),\n};\n\nconst markup = support\n    .map(\n        (el, index) =>\n            `<div class =\"support-item swiper-slide\">\n                <span class=\"support-number\">\n                    ${(index + 1).toString().padStart(2, '0')}\n                </span>\n                <a href = \"${el.url}\" title = \"${el.title}\" target='_blank' rel=\"noopener noreferrer nofollow\" aria-label=\"Link to support fond\">\n                <img src = \"${el.img}\" class=\"support-img\" srcset=\"${el.img} 1x, ${el.img2x} 2x\" alt = \"${el.title} logo\"/>\n                </a>\n            </div>`\n    )\n    .join('');\n\nrefs.list.innerHTML = markup;\n\ntoogleBtn();\n\naddEventListener('resize', toogleBtn);\n\nfunction onBtnClick() {\n    swiper.slideNext();\n    if (swiper.isBeginning || swiper.isEnd) {\n        rotateBtn();\n    }\n}\n\nfunction toogleBtn() {\n    const isHidden = refs.btn.classList.contains('hidden');\n    if (support.length > swiper.params.slidesPerGroup) {\n        if (isHidden) {\n            refs.btn.classList.remove('hidden');\n        }\n        refs.nextBtn.addEventListener('click', onBtnClick);\n    } else {\n        if (!isHidden) {\n            refs.btn.classList.add('hidden');\n        }\n    }\n}\n\nfunction rotateBtn() {\n    refs.btn.classList.toggle('support-btn-up')\n}","export const SHOPPING_LIST_KEY = 'list';\n\nfunction addToShoppingList(book) {\n  const shopList = getAllBooks();\n  shopList.push(book);\n  localStorage.setItem(SHOPPING_LIST_KEY, JSON.stringify(shopList));\n}\n\nfunction getAllBooks() {\n  return JSON.parse(localStorage.getItem(SHOPPING_LIST_KEY)) || [];\n}\n\nexport const localStorageAPI = {\n  addToShoppingList,\n  getAllBooks,\n};\n","import { booksId } from '../books API/books-api';\nimport iziToast from 'izitoast';\nimport { openAndCloseModal } from './open-close-modal';\nimport {SHOPPING_LIST_KEY, localStorageAPI} from './local-storage';\n\nconst bookIMG = document.querySelector('.popup-book-image');\nconst bookTitle = document.querySelector('.popup-book-title');\nconst bookAuthor = document.querySelector('.popup-book-author');\nconst bookReview = document.querySelector('.popup-book-review');\nconst linkAmazon = document.querySelector('.popup-shopping-links-icon.amazon');\nconst linkBook = document.querySelector('.popup-shopping-links-icon.book');\nconst btn = document.querySelector('#add');\nconst addMessage = document.querySelector('.under-button-text');\naddMessage.hidden = true;\n\nbtn.addEventListener('click', addOrRemoveBook);\n\nexport async function modalAboutBook(bookId) {\n  try {\n    const book = await booksId(bookId);\n\n    checkLocalStorage(book);\n\n    bookIMG.attributes.src.value = book.book_image;\n    bookTitle.textContent = book.title;\n    bookAuthor.textContent = book.author;\n    bookReview.textContent = book.description;\n    linkAmazon.attributes.href.value = book.buy_links[0].url;\n    linkBook.attributes.href.value = book.buy_links[1].url;\n\n    openAndCloseModal();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Books was not found : ${error.message}`,\n    });\n  }\n}\n\nexport function addOrRemoveBook(e) {\n  if (e.target.disabled) {\n    return;\n  }\n  const id = e.target.attributes.id.value;\n  if (btn.textContent === 'Add to shopping list') {\n    addBook(id);\n  } else {\n    removeBook(id);\n  }\n}\n\nexport function addBook(id) {\n  let idBooks = localStorageAPI.getAllBooks(); \n  idBooks.push(id);\n  localStorageAPI.addToShoppingList(idBooks);\n  btn.textContent = 'Remove from the shopping list';\n  addMessage.hidden = false;\n  updateShoppingList();\n}\n\nexport function removeBook(id) {\n  let idBooks = localStorageAPI.getAllBooks();\n\n  idBooks.splice(idBooks.indexOf(id), 1);\n  localStorageAPI.addToShoppingList(idBooks);\n  btn.textContent = 'Add to shopping list';\n  addMessage.hidden = true;\n  updateShoppingList();}\n\nexport function checkLocalStorage(book) {\n  let permanentLS = localStorage.getItem(`idBooks`);\n\n  if (!permanentLS || permanentLS === '' || !permanentLS.includes(book.id)) {\n    btn.textContent = 'Add to shopping list';\n  } else {\n    btn.textContent = 'Remove from the shopping list';\n    addMessage.hidden = false;\n  }\n  btn.attributes.id.value = book.id;\n}\n","export default \"__VITE_ASSET__903b04b1__$_#icon-amazon__\"","export default \"__VITE_ASSET__94a0c855__$_#icon-ibooks__\"","export default \"__VITE_ASSET__26d57c77__$_#icon-trash__\"","import amazon from '../img/symbol-defs.svg#icon-amazon';\nimport appleBook from '../img/symbol-defs.svg#icon-ibooks';\nimport trash from '../img/symbol-defs.svg#icon-trash';\nimport {\n  addOrRemoveBook,\n  addBook,\n  removeBook,\n  checkLocalStorage,\n} from './modal-window';\n\nimport { SHOPPING_LIST_KEY } from './local-storage';\n\nconst placeholder = document.querySelector('.shopping-list-default-div');\n\nfunction renderBooksFromLS() {\n  const booksLS = JSON.parse(localStorage.getItem(SHOPPING_LIST_KEY)) || [];\n\n  const booksList = document.querySelector('.shopping-list-render');\n\n  if (booksLS.length === 0) {\n    placeholder.style.display = 'block';\n  } else {\n    const markup = booksLS\n      .map(\n        book => `\n       <div class=\"card\">\n        <img src=\"${book.book_image}\" alt=\"book cover\" class=\"book-cover\">\n        <div class=\"about\">\n          <h2 class=\"book-title\">${book.title}</h2>\n          <p class=\"book-category\">${book.list_name}</p>\n          <p class=\"book-description\">${book.description}</p>\n          <p class=\"book-author\">${book.author}</p>\n        </div>\n           <div class=\"buy\">\n        <a href=\"${book.buy_links[0].url}\" target=\"_blank\">\n          <svg class=\"amazon\" width=\"16\" height=\"16\">\n            <use href=\"${amazon}\"></use>\n          </svg>\n        </a>\n        <a href=\"${book.buy_links[1].url}\" target=\"_blank\">\n          <svg class=\"ibook\" width=\"16\" height=\"16\">\n            <use href=\"${appleBook}\"></use>\n          </svg>\n        </a>\n      </div>\n      <button data-book-id=\"${book._id}\" class=\"delete-btn\">\n        <div class=\"icon-trash\">\n          <svg class=\"trash\" width=\"16\" height=\"16\">\n            <use href=\"${trash}\"></use>\n          </svg>\n        </div>\n      </button>\n       </div>\n  `\n      )\n      .join('');\n\n    booksList.insertAdjacentHTML('beforeend', markup);\n  }\n\n  const deleteBtn = document.querySelectorAll('.delete-btn');\n\n  deleteBtn.forEach(button => {\n    button.addEventListener('click', () => {\n      const bookId = button.getAttribute('data-book-id');\n      removeFromShoppingList(bookId);\n\n      const card = button.closest('.card');\n      if (card) {\n        card.remove();\n      }\n\n      updateCardView();\n    });\n  });\n}\n\nrenderBooksFromLS();\n\nfunction removeFromShoppingList(bookId) {\n  const savedBooks = getLocalStorageItem(SHOPPING_LIST_KEY);\n\n  if (!savedBooks || savedBooks.length === 0) {\n    return;\n  }\n\n  const updatedBooks = savedBooks.filter(book => book._id !== bookId);\n\n  toLocalStorage(SHOPPING_LIST_KEY, updatedBooks);\n}\n\nfunction isCardEmpty() {\n  const shoppingList = document.querySelector('.shopping-list-render');\n  return shoppingList.children.length === 0;\n}\n\nfunction updateCardView() {\n  const supportBlock = document.querySelector('.support-ukraine');\n\n  if (isCardEmpty()) {\n    placeholder.style.display = 'block';\n    supportBlock.style.display = 'none';\n  } else {\n    placeholder.style.display = 'none';\n    supportBlock.style.display = 'block';\n  }\n}\n"],"names":["themeToggle","body","mobileMenu","openMenuBtn","closeMenuBtn","closeMenuLink","toggleMenu","isMenuOpen","scrollLockMethod","item","e","support","swiperOptions","swiper","Swiper","refs","markup","el","index","toogleBtn","onBtnClick","rotateBtn","isHidden","SHOPPING_LIST_KEY","addToShoppingList","book","shopList","getAllBooks","localStorageAPI","btn","addMessage","addOrRemoveBook","id","addBook","removeBook","idBooks","amazon","appleBook","trash","placeholder","renderBooksFromLS","booksLS","booksList","button","bookId","removeFromShoppingList","card","updateCardView","savedBooks","updatedBooks","isCardEmpty","supportBlock"],"mappings":"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"}