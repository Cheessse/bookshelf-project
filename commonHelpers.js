import"./assets/modal-window-1bb5be6d.js";import{a as m,i as C,P as E}from"./assets/vendor-428a2275.js";const r=document.querySelector(".books-container-one-cat"),l=document.querySelector(".book-item"),u=document.querySelector("#btn-seemore"),i=window.innerWidth;let d,a;async function S(t){const o="https://books-backend.p.goit.global/books/category",e=encodeURIComponent(t),n=`${o}?category=${e}`,s={method:"GET",headers:{"Content-Type":"application/json"}};return(await m.get(n,s)).data}async function p(t,o,e){const n="https://books-backend.p.goit.global/books/top-books",s=encodeURIComponent(t),c=t?`${n}?category=${s}&limit=${e}`:`${n}?limit=${e}`,B={method:"GET",headers:{"Content-Type":"application/json"}};return o==="mobile"?a=1:o==="tablet"&&(a=3),(await m.get(c,B)).data.slice(0,a)}function $(t){return` <li class="book-item-img"><img src="${t.book_image}" alt="${t.description}" srcset="${t.book_image}" width="335" height="485" class="book-image">
  </li>
    <li class="book-item-title">${t.title}</li>
    <li class="book-item-author">${t.author}</li>
  </li>`}function k(t){return t.map($).join("")}function I(t,o){r.innerHTML="",l.innerHTML="";const n=o.split(" "),s=n.pop(),c=`<h3 class="container-category-one">${n.join(" ")+' <span class="last-word">'+s+"</span>"}</h3>`+k(t);r.innerHTML=c}function g(t){r.innerHTML="",l.innerHTML="";const o='<h2 class="container-title">Best Sellers <span>Book</span></h2>';let e="";for(const n of t)e+=`<h3 class="container-category-all">${n.list_name}</h3>`+k(n.books);l.innerHTML=o+e}async function M(t){try{f();const o=await S(t);I(o,t)}catch{T("Sorry, there are no books for these category! ","red","white")}}async function b(t){try{let o;i>=375&&i<=767?o=1:i>=768&&i<=1279?o=3:o=5;const e=await p(t,d,o);g(e),L(t)}catch{T("Sorry, no books! ","red","white")}}function y(){u.classList.remove("hidden")}function f(){u.classList.add("hidden")}u.addEventListener("click",t=>{t.preventDefault(),L(category)});async function L(t){if(i>=375&&i<=767){y(),a++;const o=await p(t,d,a);g(o)}else if(i>=768&&i<=1279){y(),a+=2;const o=await p(t,d,a);g(o)}else f()}function T(t,o,e){C.error({position:"topRight",message:t,messageColor:e,messageSize:"16",messageLineHeight:"15",backgroundColor:o,timeout:5e3,displayMode:2,close:!0,closeOnEscape:!0,closeOnClick:!0})}async function x(){const t="https://books-backend.p.goit.global/books/category-list",o={method:"GET"};return(await m.get(t,{options:o})).data}const A=document.querySelector("#category-list");window.onload=function(){const t=document.getElementById("category-list"),o=document.createElement("li");o.textContent="ALL CATEGORIES",o.id="title",t.appendChild(o),x().then(e=>{e.forEach(function(n){const s=document.createElement("p");s.textContent=n.list_name,s.classList.add("p-list"),t.appendChild(s)})}).catch(e=>{console.error("Error fetching data;",e)}),b(category)};A.addEventListener("click",async t=>{if(t.preventDefault(),t.target.tagName==="P"){const o=t.target.textContent;M(o)}else t.target.id==="title"&&b(category)});function w(t,o){const e=JSON.parse(localStorage.getItem("shoppingList"))||[],n=(t-1)*o,s=n+o,c=e.slice(n,s);document.getElementById("shopping-list").innerHTML=c.join("<br>")}const h=3,H=new E(document.getElementById("pagination"),{totalItems:JSON.parse(localStorage.getItem("shoppingList")).length,itemsPerPage:h,visiblePages:5,centerAlign:!0});H.on("beforeMove",function(t){w(t.page,h)});w(1,h);window.onscroll=function(){P()};function P(){const t=document.getElementById("scrollToTopBtn");document.body.scrollTop>20||document.documentElement.scrollTop>20?t.style.display="block":t.style.display="none"}
//# sourceMappingURL=commonHelpers.js.map
