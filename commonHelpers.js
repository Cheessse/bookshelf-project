import"./assets/modal-window-f337a4f1.js";import{a as u,i as E}from"./assets/vendor-59c8246b.js";async function w(){const t="https://books-backend.p.goit.global/books/category-list",e={method:"GET"};return(await u.get(t,{options:e})).data}async function S(t){const e="https://books-backend.p.goit.global/books/category",o=encodeURIComponent(t),n=`${e}?category=${o}`,c={method:"GET",headers:{"Content-Type":"application/json"}};return(await u.get(n,c)).data}async function g(t,e){const o="https://books-backend.p.goit.global/books/top-books",n=encodeURIComponent(t);let c;e?c=`${o}?category=${n}&limit=${e}`:c=`${o}?category=${n}`;const i={method:"GET",headers:{"Content-Type":"application/json"}};return(await u.get(c,i)).data}const y=document.querySelector(".books-container-one-cat"),a=document.querySelector(".books-container-all-cat-block"),p=document.querySelector(".books-container-all-cat-title"),r=window.innerWidth;let s;function C(t){return`<div class="book-item">
  <ul class="book-item-block">
    <li class="book-item-img">
      <img
        src="${t.book_image}"
        alt="${t.description}"
        srcset="${t.book_image}"
        width="335"
        height="485"
        class="book-image"
      />
    </li>
    <li class="book-item-title">${t.title}</li>
    <li class="book-item-author">${t.author}</li>
  </ul>
</div>`}function k(t){return t.map(C).join("")}function $(t,e){y.innerHTML="",a.innerHTML="",p.innerHTML="";const n=e.split(" "),c=n.pop(),i=`<h3 class="container-category-one">${n.join(" ")+' <span class="last-word">'+c+"</span>"}</h3>`+k(t);a.innerHTML=i}function b(t){y.innerHTML="",a.innerHTML="";const e='<h2 class="container-title">Best Sellers <span>Book</span></h2>';let o="";t.forEach(n=>{o+=`<h3 class="container-category-all">${n.list_name}</h3>`+k(n.books)+`<button type="button" class="btn-seemore hidden" data-category="${n.list_name}">SEE MORE</button>`}),p.innerHTML=e,a.innerHTML=o}async function A(t){try{const e=await S(t);$(e,t)}catch{h("Sorry, there are no books for these category! ","red","white")}}async function f(t){try{if(r>=375&&r<=767)s=1;else if(r>=768&&r<=1279)s=3;else{s=5;return}let e=await g(t,s);e=e.map(o=>(o.books=o.books.slice(0,s),o)),b(e),T()}catch{h("Sorry, no books! ","red","white")}}function T(){s===1||s===3?M():H()}function M(){if(s<=5){const t=document.querySelectorAll(".btn-seemore");for(let e=0;e<t.length;e++)t[e].classList.remove("hidden")}}function H(){if(s>=5){const t=document.querySelectorAll(".btn-seemore");for(let e=0;e<t.length;e++)t[e].classList.add("hidden")}}async function q(t,e){try{if(r>=375&&r<=767)s=1,s+=4;else if(r>=768&&r<=1279)s=3,s+=2;else return;let o=await g(e,s);o=o.map(n=>(n.books=n.books.slice(0,s),n)),b(o),T()}catch{h("Sorry, no books! ","red","white")}}a.addEventListener("click",async t=>{if(t.target&&t.target.classList.contains("btn-seemore")){t.preventDefault();const e=t.target.dataset.category;await q(t,e)}});function h(t,e,o){E.error({position:"topRight",message:t,messageColor:o,messageSize:"16",messageLineHeight:"15",backgroundColor:e,timeout:5e3,displayMode:2,close:!0,closeOnEscape:!0,closeOnClick:!0})}const R=document.querySelector("#category-list");let L;window.onload=function(){const t=document.getElementById("category-list"),e=document.createElement("li");e.textContent="ALL CATEGORIES",e.id="title",t.appendChild(e),w().then(o=>{o.forEach(function(n){const c=document.createElement("p");c.textContent=n.list_name,c.classList.add("p-list"),t.appendChild(c)})}).catch(o=>{console.error("Error fetching data;",o)}),f(L)};R.addEventListener("click",async t=>{if(t.preventDefault(),t.target.tagName==="P"){const e=t.target.textContent;A(e)}else t.target.id==="title"&&f(L)});window.onscroll=function(){I()};function I(){const t=document.getElementById("scrollToTopBtn");document.body.scrollTop>20||document.documentElement.scrollTop>20?t.style.display="block":t.style.display="none"}const l=document.querySelector("#slider"),B=document.querySelector("#theme-style");let m=localStorage.getItem("theme");m&&B.setAttribute("href",`./css/${m}.css`);function d(t){localStorage.setItem("theme",t),B.setAttribute("href",`./css/${t}.css`)}function _(){l.checked?d("styles-light-theme"):d("styles-dark-theme")}l.addEventListener("change",_);function x(){m==="styles-dark-theme"?(d("styles-dark-theme"),l.checked=!1):(d("styles-light-theme"),l.checked=!0)}x();
//# sourceMappingURL=commonHelpers.js.map
