import"./assets/modal-window-fb62e382.js";import{a as d,i as b,P as B}from"./assets/vendor-428a2275.js";async function g(){const t="https://books-backend.p.goit.global/books/category-list",o={method:"GET"};return(await d.get(t,{options:o})).data}const r=document.querySelector(".books-container-one-cat"),l=document.querySelector(".book-item"),m=document.querySelector("#btn-seemore"),c=window.innerWidth;async function L(t){const o="https://books-backend.p.goit.global/books/category",e=encodeURIComponent(t),n=`${o}?category=${e}`,s={method:"GET",headers:{"Content-Type":"application/json"}};return(await d.get(n,s)).data}async function E(t,o){const e="https://books-backend.p.goit.global/books/top-books",n=encodeURIComponent(t);let s;o?s=`${e}?category=${n}&limit=${o}`:s=`${e}?category=${n}`;const a={method:"GET",headers:{"Content-Type":"application/json"}};return(await d.get(s,a)).data}function w(t){return` <li class="book-item-img"><img src="${t.book_image}" alt="${t.description}" srcset="${t.book_image}" width="335" height="485" class="book-image">
  </li>
    <li class="book-item-title">${t.title}</li>
    <li class="book-item-author">${t.author}</li>
  </li>`}function u(t){return t.map(o=>w(o)).join("")}function C(t,o){r.innerHTML="",l.innerHTML="";const n=o.split(" "),s=n.pop(),a=`<h3 class="container-category-one">${n.join(" ")+' <span class="last-word">'+s+"</span>"}</h3>`+u(t);r.innerHTML=a}function T(t){r.innerHTML="",l.innerHTML="";const o='<h2 class="container-title">Best Sellers <span>Book</span></h2>';let e="";t.forEach(n=>{e+=`<h3 class="container-category-all">${n.category}</h3>`+u(n.books)}),l.innerHTML=o+e}async function S(t){try{I();const o=await L(t);C(o,t)}catch{h("Sorry, there are no books for these category! ","red","white")}}async function y(t){try{let o;if(c>=375&&c<=767)o=1;else if(c>=768&&c<=1279)o=3;else{o=5;return}const n=(await g(t)).map(async a=>{const f=(await E(a.list_name,o)).slice(0,o);return{category:a.list_name,books:f}}),s=await Promise.all(n);T(s)}catch{h("Sorry, no books! ","red","white")}}function I(){m.classList.add("hidden")}m.addEventListener("click",t=>{t.preventDefault(),$()});async function $(t){}function h(t,o,e){b.error({position:"topRight",message:t,messageColor:e,messageSize:"16",messageLineHeight:"15",backgroundColor:o,timeout:5e3,displayMode:2,close:!0,closeOnEscape:!0,closeOnClick:!0})}const M=document.querySelector("#category-list");window.onload=function(){const t=document.getElementById("category-list"),o=document.createElement("li");o.textContent="ALL CATEGORIES",o.id="title",t.appendChild(o),g().then(e=>{e.forEach(function(n){const s=document.createElement("p");s.textContent=n.list_name,s.classList.add("p-list"),t.appendChild(s)})}).catch(e=>{console.error("Error fetching data;",e)}),y(category)};M.addEventListener("click",async t=>{if(t.preventDefault(),t.target.tagName==="P"){const o=t.target.textContent;S(o)}else t.target.id==="title"&&y(category)});function k(t,o){const e=JSON.parse(localStorage.getItem("shoppingList"))||[],n=(t-1)*o,s=n+o,a=e.slice(n,s);document.getElementById("shopping-list").innerHTML=a.join("<br>")}const p=3,x=new B(document.getElementById("pagination"),{totalItems:JSON.parse(localStorage.getItem("shoppingList")).length,itemsPerPage:p,visiblePages:5,centerAlign:!0});x.on("beforeMove",function(t){k(t.page,p)});k(1,p);document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("loader"),o=document.getElementById("content");function e(){t.style.display="block",o.style.display="none"}function n(){t.style.display="none",o.style.display="block"}async function s(){e();try{const i=await(await fetch("https://example.com/data")).json();console.log(i)}catch(a){console.error("Error fetching data:",a)}finally{n()}}s()});window.onscroll=function(){P()};function P(){const t=document.getElementById("scrollToTopBtn");document.body.scrollTop>20||document.documentElement.scrollTop>20?t.style.display="block":t.style.display="none"}
//# sourceMappingURL=commonHelpers.js.map
