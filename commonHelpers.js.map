{"version":3,"file":"commonHelpers.js","sources":["../src/books API/books-api.js","../src/js/render-function-books.js","../src/js/home-books.js","../src/js/home-menu.js","../src/js/modal-window.js","../src/js/pagination.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function categoryList() {\n  const URL = 'https://books-backend.p.goit.global/books/category-list';\n\n  const options = {\n    method: 'GET',\n  };\n\n  const res = await axios.get(URL, { options });\n  return res.data;\n}\n\nexport async function booksByCategory(category) {\n  const URL = 'https://books-backend.p.goit.global/books/category';\n\n  const options = {\n    method: 'GET',\n    params: {\n      category: category,\n    },\n  };\n\n  const res = await axios.get(URL, { options });\n  return res.data;\n}\n\nexport async function topBooks() {\n  const URL = 'https://books-backend.p.goit.global/books/top-books';\n\n  const options = {\n    method: 'GET',\n  };\n\n  const res = await axios.get(URL, { options });\n  return res.data;\n}\n\nexport async function booksId() {\n  const URL = 'https://books-backend.p.goit.global/books/{id}';\n\n  const options = {\n    method: 'GET',\n  };\n\n  const res = await axios.get(URL, { options });\n  return res.data;\n}\n","const booksContainer = document.querySelector('.books-container');\nconst containerTitle = document.querySelector('.container-title');\nconst containerCategory = document.querySelector('.container-category');\n\nfunction bookCreation({ book_image, title, author }) {\n  const container = `<ul class=\"book-div\">\n <li class=\"book-img\"><img src=\"${book_image}\" alt=\"\"></li>\n <li class=\"book-title\">${title}</li>\n <li class=\"author\">${author}</li>\n</ul>`;\n  return container;\n}\n\nfunction booksCreation(books){\n return books.map(bookCreation).join('');\n}\n\nexport function renderBooksAllCat({books,list_name}){\n    const markup=booksCreation(books);\n    containerTitle.textContent='Best Sellers Books';\n    containerCategory.textContent=`'${list_name}'`;\n    containerTitle.insertAdjacentHTML('afterbegin', containerTitle.textContent );\n    containerCategory.insertAdjacentHTML('afterbegin', containerCategory.textContent );\n\n    booksContainer.insertAdjacentHTML('beforeend', markup);\n}\n \nexport function renderBooksByCat({books,list_name}){\n    const markup=booksCreation(books);\n    containerTitle.textContent=`'${list_name}'`;\n    containerTitle.insertAdjacentHTML('afterbegin', containerTitle.textContent );\n\n    booksContainer.insertAdjacentHTML('beforeend', markup);\n}","// import { categoryList } from '../books API/books-api';\n\nimport { booksByCategory } from '../books API/books-api';\n\nimport { topBooks } from '../books API/books-api';\n\nimport { renderBooksAllCat } from './render-function-books';\n\nimport { renderBooksByCat } from './render-function-books';\n\nconst categoryBlock=document.querySelector('#category-list')\n\nlet page;\n\nexport async function loadBooks(e) {\n  e.preventDefault();\n  page = 1;\n  categoryName=categoryBlock.querySelectorAll('#p-list')\n  try {\n    const data = await booksByCategory();\n    const dataTop = await topBooks();\n    if (data.target.list_name === categoryName) {\n      renderBooksByCat(data);\n    } else {\n      renderBooksAllCat(dataTop);\n    }\n  } catch (error) {\n    console.log(error);\n  }\n\n  e.target.reset();\n}\n\n// function loadMoreBooks() {\n//   page += 1;\n// }\n","\nimport { categoryList } from '../books API/books-api';\nimport { loadBooks } from './home-books';\n\nwindow.onload = function () {\n    const myCategoryList = document.getElementById(\"category-list\");\n    const title = document.createElement('li');\n    title.textContent = \"ALL CATEGORIES\";\n    title.id = \"title\";\n    myCategoryList.appendChild(title);\n    categoryList().then(categories => {\n        categories.forEach(function (category) {\n            const paragraph = document.createElement('p'); // создаем <p> для кажд элем списка\n            paragraph.textContent = category.list_name;\n            paragraph.id = \"p-list\";\n            paragraph.addEventListener('click', loadBooks); //Вызываем функцию loadBooks при клике на элемент\n            myCategoryList.appendChild(paragraph);\n        });\n    }).catch(error => {\n        console.error('Error fetching data;', error);\n    });\n};\n","import{ booksId } from \"../books API/books-api\"\nimport  iziToast from 'izitoast';\nimport { openAndCloseModal } from \"./open-close-modal\";\n\n\nconst bookIMG = document.querySelector('.popup-book-image');\nconst bookTitle = document.querySelector('.popup-book-title');\nconst bookAuthor = document.querySelector('.popup-book-author');\nconst bookReview = document.querySelector('.popup-book-review');\nconst linkAmazon = document.querySelector('.popup-shopping-links-icon.amazon');\nconst linkBook = document.querySelector('.popup-shopping-links-icon.book');\nconst btn = document.querySelector('#add');\nconst addMessage = document.querySelector('.under-button-text');\naddMessage.hidden = true;\n\nbtn.addEventListener('click', addOrRemoveBook);\n\nexport async function modalAboutBook(bookId) {\n    try {\n      const book = await booksId(bookId);\n\n      checkLocalStorage(book);\n  \n      bookIMG.attributes.src.value = book.book_image;\n      bookTitle.textContent = book.title;\n      bookAuthor.textContent = book.author;\n      bookReview.textContent = book.description;\n      linkAmazon.attributes.href.value = book.buy_links[0].url;\n      linkBook.attributes.href.value = book.buy_links[1].url;\n  \n      openAndCloseModal();\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: `Books was not found : ${error.message}`,\n          });\n    }\n  }\n\nfunction addOrRemoveBook(e) {\n  if (e.target.disabled) {\n    return;\n  }\n  const id = e.target.attributes.id.value;\n  if (btn.textContent === 'Add to shopping list') {\n    addBook(id);\n  } else {\n    removeBook(id);\n  }\n}\n\nfunction addBook(id) {\n  let idBooks = localStorage.getItem(`idBooks`);\n\n  if (idBooks === 'undefined' || !idBooks || idBooks === '') {\n    idBooks = [];\n    localStorage.setItem(`idBooks`, JSON.stringify(idBooks));\n  }\n\n  idBooks = JSON.parse(localStorage.getItem(`idBooks`));\n\n  idBooks.push(id);\n  localStorage.setItem(`idBooks`, JSON.stringify(idBooks));\n  btn.textContent = 'Remove from the shopping list';\n  addMessage.hidden = false;\n    updateShoppingList();\n}\n\nfunction removeBook(id) {\n  let idBooks = JSON.parse(localStorage.getItem(`idBooks`));\n\n  idBooks.splice(idBooks.indexOf(id), 1);\n  localStorage.setItem(`idBooks`, JSON.stringify(idBooks));\n  btn.textContent = 'Add to shopping list';\n  addMessage.hidden = true;\n    updateShoppingList();\n  \n}\n\nfunction checkLocalStorage(book) {\n    let permanentLS = localStorage.getItem(`idBooks`);\n  \n    if (!permanentLS || permanentLS === '' || !permanentLS.includes(book.id)) {\n      btn.textContent = 'Add to shopping list';\n    } else {\n      btn.textContent = 'Remove from the shopping list';\n      addMessage.hidden = false;\n    }\n    btn.attributes.id.value = book.id;\n  }\n","import Pagination from 'tui-pagination';\n\nfunction displayShoppingList(pageNumber, itemsPerPage) {\n    const shoppingList = JSON.parse(localStorage.getItem('shoppingList')) || [];\n    const startIndex = (pageNumber - 1) * itemsPerPage;\n    const endIndex = startIndex + itemsPerPage;\n    const currentPageItems = shoppingList.slice(startIndex, endIndex);\n    \n    document.getElementById('shopping-list').innerHTML = currentPageItems.join('<br>');\n}\n\nconst itemsPerPage = 3;\n\nconst pagination = new Pagination(document.getElementById('pagination'), {\n    totalItems: JSON.parse(localStorage.getItem('shoppingList')).length,\n    itemsPerPage: itemsPerPage,\n    visiblePages: 5,\n    centerAlign: true\n});\n\npagination.on('beforeMove', function (eventData) {\n    displayShoppingList(eventData.page, itemsPerPage);\n});\n\ndisplayShoppingList(1, itemsPerPage);\n"],"names":["categoryList","URL","options","axios","booksByCategory","category","topBooks","booksContainer","containerTitle","containerCategory","bookCreation","book_image","title","author","booksCreation","books","renderBooksAllCat","list_name","markup","renderBooksByCat","categoryBlock","loadBooks","data","dataTop","error","myCategoryList","categories","paragraph","btn","addMessage","addOrRemoveBook","id","addBook","removeBook","idBooks","displayShoppingList","pageNumber","itemsPerPage","shoppingList","startIndex","endIndex","currentPageItems","pagination","Pagination","eventData"],"mappings":"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"}