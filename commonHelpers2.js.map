{"version":3,"file":"commonHelpers2.js","sources":["../src/img/symbol-defs.svg#icon-amazon","../src/img/symbol-defs.svg#icon-ibooks","../src/img/symbol-defs.svg#icon-trash","../src/js/local-storage.js","../src/js/shopping-list.js"],"sourcesContent":["export default \"__VITE_ASSET__bf1dda18__$_#icon-amazon__\"","export default \"__VITE_ASSET__1950cb8b__$_#icon-ibooks__\"","export default \"__VITE_ASSET__0f0e1258__$_#icon-trash__\"","const SHOPPING_LIST_KEY = 'list';\n\nfunction addToShoppingList(book) {\n  const shopList = getAllBooks();\n  shopList.push(book);\n  localStorage.setItem(SHOPPING_LIST_KEY, JSON.stringify(shopList));\n}\n\nfunction getAllBooks() {\n  return JSON.parse(localStorage.getItem(SHOPPING_LIST_KEY)) || [];\n}\n\nexport const localStorageAPI = {\n  SHOPPING_LIST_KEY,\n  addToShoppingList,\n  getAllBooks,\n};\n","import amazon from '../img/symbol-defs.svg#icon-amazon';\nimport appleBook from '../img/symbol-defs.svg#icon-ibooks';\nimport trash from '../img/symbol-defs.svg#icon-trash';\n\nimport {\n  addOrRemoveBook,\n  addBook,\n  removeBook,\n  checkLocalStorage,\n} from './modal-window';\n\nimport { localStorageAPI } from './local-storage';\n\nconst placeholder = document.querySelector('.shopping-list-default-div');\n\nfunction renderBooksFromLS() {\n  const booksLS =\n    JSON.parse(localStorage.getItem(localStorageAPI.SHOPPING_LIST_KEY)) || [];\n\n  const booksList = document.querySelector('.shopping-list-render');\n\n  if (booksLS.length === 0) {\n    placeholder.style.display = 'block';\n  } else {\n    placeholder.style.display = 'none';\n    const markup = booksLS\n      .map(\n        book => `\n       <div class=\"card\">\n        <img src=\"${book.book_image}\" alt=\"book cover\" class=\"book-cover\" >\n        <div class=\"about\">\n          <h2 class=\"book-title\">${book.title}</h2>\n          <p class=\"book-category\">${book.list_name}</p>\n          <p class=\"book-description\">${book.description}</p>\n          <p class=\"book-author\">${book.author}</p>\n        </div>\n           <div class=\"buy\">\n        <a href=\"${book.buy_links[0].url}\" target=\"_blank\">\n          <svg class=\"amazon\" width=\"16\" height=\"16\">\n            <use href=\"${amazon}\"></use>\n          </svg>\n        </a>\n        <a href=\"${book.buy_links[1].url}\" target=\"_blank\">\n          <svg class=\"ibook\" width=\"16\" height=\"16\">\n            <use href=\"${appleBook}\"></use>\n          </svg>\n        </a>\n      </div>\n      <button data-book-id=\"${book._id}\" class=\"delete-btn\">\n        <div class=\"icon-trash\">\n          <svg class=\"trash\" width=\"16\" height=\"16\">\n            <use href=\"${trash}\"></use>\n          </svg>\n        </div>\n      </button>\n       </div>\n  `\n      )\n      .join('');\n\n    booksList.insertAdjacentHTML('beforeend', markup);\n  }\n\n  const deleteBtn = document.querySelectorAll('.delete-btn');\n\n  deleteBtn.forEach(button => {\n    button.addEventListener('click', () => {\n      const bookId = button.getAttribute('data-book-id');\n      removeFromShoppingList(bookId);\n\n      const card = button.closest('.card');\n      if (card) {\n        card.remove();\n      }\n\n      updateCardView();\n    });\n  });\n}\n\nrenderBooksFromLS();\n\nfunction removeFromShoppingList(bookId) {\n  const booksLS =\n    JSON.parse(localStorage.getItem(localStorageAPI.SHOPPING_LIST_KEY)) || [];\n\n  if (!booksLS || booksLS.length === 0) {\n    return;\n  }\n\n  const updatedBooks = booksLS.filter(book => book._id !== bookId);\n  console.log(updatedBooks);\n\n  toLocalStorage(localStorageAPI.SHOPPING_LIST_KEY, updatedBooks);\n}\n\nfunction isCardEmpty() {\n  const shoppingList = document.querySelector('.shopping-list-render');\n  return shoppingList.children.length === 0;\n}\n\nfunction updateCardView() {\n  const supportBlock = document.querySelector('.support-ukraine');\n\n  if (isCardEmpty()) {\n    placeholder.style.display = 'block';\n    supportBlock.style.display = 'none';\n  } else {\n    placeholder.style.display = 'none';\n    supportBlock.style.display = 'block';\n  }\n}\nupdateCardView();\n"],"names":["amazon","appleBook","trash","SHOPPING_LIST_KEY","addToShoppingList","book","shopList","getAllBooks","localStorageAPI","placeholder","renderBooksFromLS","booksLS","booksList","markup","button","bookId","removeFromShoppingList","card","updateCardView","updatedBooks","isCardEmpty","supportBlock"],"mappings":"4EAAA,MAAeA,EAAA,8DCAAC,EAAA,8DCAAC,EAAA,6DCATC,EAAoB,OAE1B,SAASC,EAAkBC,EAAM,CAC/B,MAAMC,EAAWC,IACjBD,EAAS,KAAKD,CAAI,EAClB,aAAa,QAAQF,EAAmB,KAAK,UAAUG,CAAQ,CAAC,CAClE,CAEA,SAASC,GAAc,CACrB,OAAO,KAAK,MAAM,aAAa,QAAQJ,CAAiB,CAAC,GAAK,EAChE,CAEO,MAAMK,EAAkB,CAC7B,kBAAAL,EACA,kBAAAC,EACA,YAAAG,CACF,ECHME,EAAc,SAAS,cAAc,4BAA4B,EAEvE,SAASC,GAAoB,CAC3B,MAAMC,EACJ,KAAK,MAAM,aAAa,QAAQH,EAAgB,iBAAiB,CAAC,GAAK,GAEnEI,EAAY,SAAS,cAAc,uBAAuB,EAEhE,GAAID,EAAQ,SAAW,EACrBF,EAAY,MAAM,QAAU,YACvB,CACLA,EAAY,MAAM,QAAU,OAC5B,MAAMI,EAASF,EACZ,IACCN,GAAQ;AAAA;AAAA,oBAEIA,EAAK,UAAU;AAAA;AAAA,mCAEAA,EAAK,KAAK;AAAA,qCACRA,EAAK,SAAS;AAAA,wCACXA,EAAK,WAAW;AAAA,mCACrBA,EAAK,MAAM;AAAA;AAAA;AAAA,mBAG3BA,EAAK,UAAU,CAAC,EAAE,GAAG;AAAA;AAAA,yBAEfL,CAAM;AAAA;AAAA;AAAA,mBAGZK,EAAK,UAAU,CAAC,EAAE,GAAG;AAAA;AAAA,yBAEfJ,CAAS;AAAA;AAAA;AAAA;AAAA,8BAIJI,EAAK,GAAG;AAAA;AAAA;AAAA,yBAGbH,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,GAMvB,EACA,KAAK,EAAE,EAEVU,EAAU,mBAAmB,YAAaC,CAAM,CACjD,CAEiB,SAAS,iBAAiB,aAAa,EAE/C,QAAQC,GAAU,CAC1BA,EAAO,iBAAiB,QAAS,IAAM,CACrC,MAAMC,EAASD,EAAO,aAAa,cAAc,EACjDE,EAAuBD,CAAM,EAE7B,MAAME,EAAOH,EAAO,QAAQ,OAAO,EAC/BG,GACFA,EAAK,OAAM,EAGbC,GACN,CAAK,CACL,CAAG,CACH,CAEAR,IAEA,SAASM,EAAuBD,EAAQ,CACtC,MAAMJ,EACJ,KAAK,MAAM,aAAa,QAAQH,EAAgB,iBAAiB,CAAC,GAAK,GAEzE,GAAI,CAACG,GAAWA,EAAQ,SAAW,EACjC,OAGF,MAAMQ,EAAeR,EAAQ,OAAON,GAAQA,EAAK,MAAQU,CAAM,EAC/D,QAAQ,IAAII,CAAY,EAExB,eAAeX,EAAgB,kBAAmBW,CAAY,CAChE,CAEA,SAASC,GAAc,CAErB,OADqB,SAAS,cAAc,uBAAuB,EAC/C,SAAS,SAAW,CAC1C,CAEA,SAASF,GAAiB,CACxB,MAAMG,EAAe,SAAS,cAAc,kBAAkB,EAE1DD,EAAW,GACbX,EAAY,MAAM,QAAU,QAC5BY,EAAa,MAAM,QAAU,SAE7BZ,EAAY,MAAM,QAAU,OAC5BY,EAAa,MAAM,QAAU,QAEjC,CACAH,EAAgB"}