{"version":3,"file":"commonHelpers2.js","sources":["../src/img/symbol-defs.svg#icon-amazon","../src/img/symbol-defs.svg#icon-ibooks","../src/img/symbol-defs.svg#icon-trash","../src/js/shopping-list.js"],"sourcesContent":["export default \"__VITE_ASSET__3360d5f8__$_#icon-amazon__\"","export default \"__VITE_ASSET__bf1dda18__$_#icon-ibooks__\"","export default \"__VITE_ASSET__1950cb8b__$_#icon-trash__\"","const URL = 'https://books-backend.p.goit.global/books/';\n\nimport amazon from '../img/symbol-defs.svg#icon-amazon';\nimport appleBook from '../img/symbol-defs.svg#icon-ibooks';\nimport trash from '../img/symbol-defs.svg#icon-trash';\n\nconst placeholder = document.querySelector('.shopping-list-default-div');\nconst shoppingList = document.querySelector('.shopping-list-render');\n\nasync function retrieveBooksFromLS() {\n  try {\n    const arrayLS = JSON.parse(localStorage.getItem('idBooks')) || [];\n    if (!arrayLS || arrayLS.length === 0) {\n      console.log('Масив ID порожній або відсутній.');\n      return;\n    }\n\n    const promises = arrayLS.map(async id => {\n      const response = await fetch(`${URL}/${id}`);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch data for ID: ${id}`);\n      }\n      return response.json();\n    });\n    const responseData = await Promise.all(promises);\n    renderData(responseData);\n  } catch (error) {\n    console.error('Error:', error.message);\n  }\n}\n\nfunction renderData(dataArray) {\n  if (dataArray.length === 0) {\n    placeholder.style.display = 'block';\n    return;\n  }\n  const markup = dataArray\n    .map(book => {\n      return `\n      <div class=\"card\">\n        <img src=\"${book.book_image}\" alt=\"book cover\" class=\"book-cover\" >\n        <div class=\"about\">\n          <h2 class=\"book-title\">${book.title}</h2>\n          <p class=\"book-category\">${book.list_name}</p>\n          <p class=\"book-description\">${book.description}</p>\n          <p class=\"book-author\">${book.author}</p>\n        </div>\n           <div class=\"buy\">\n        <a href=\"${book.buy_links[0].url}\" target=\"_blank\">\n          <svg class=\"amazon\" width=\"16\" height=\"16\">\n            <use href=\"${amazon}\"></use>\n          </svg>\n        </a>\n        <a href=\"${book.buy_links[1].url}\" target=\"_blank\">\n          <svg class=\"ibook\" width=\"16\" height=\"16\">\n            <use href=\"${appleBook}\"></use>\n          </svg>\n        </a>\n      </div>\n      <button data-book-id=\"${book._id}\" class=\"delete-btn\">\n        <div class=\"icon-trash\">\n          <svg class=\"trash\" width=\"16\" height=\"16\">\n            <use href=\"${trash}\"></use>\n          </svg>\n        </div>\n      </button>\n      </div>\n    `;\n    })\n    .join('');\n\n  shoppingList.insertAdjacentHTML('beforeend', markup);\n  if (dataArray.length === 0) {\n    placeholder.style.display = 'block';\n  } else {\n    placeholder.style.display = 'none';\n  }\n\n  const deleteBtn = document.querySelectorAll('.delete-btn');\n\n  deleteBtn.forEach(button => {\n    button.addEventListener('click', () => {\n      const bookId = button.getAttribute('data-book-id');\n      removeFromShoppingList(bookId);\n\n      const card = button.closest('.card');\n      if (card) {\n        card.remove();\n      }\n\n      updateCardView();\n    });\n  });\n}\nretrieveBooksFromLS();\n\nfunction removeFromShoppingList(bookId) {\n  const arrayLS = JSON.parse(localStorage.getItem('idBooks')) || [];\n\n  if (!arrayLS || arrayLS.length === 0) {\n    return;\n  }\n\n  const updatedBooks = arrayLS.filter(book_id => book_id !== bookId);\n  localStorage.setItem('idBooks', JSON.stringify(updatedBooks));\n}\n\nfunction isCardEmpty() {\n  const shoppingList = document.querySelector('.shopping-list-render');\n  return shoppingList.children.length === 0;\n}\n\nfunction updateCardView() {\n  const supportBlock = document.querySelector('.support-ukraine');\n\n  if (isCardEmpty()) {\n    placeholder.style.display = 'block';\n    supportBlock.style.display = 'block';\n  } else {\n    placeholder.style.display = 'none';\n    supportBlock.style.display = 'block';\n  }\n}\nupdateCardView();\n"],"names":["amazon","appleBook","trash","URL","placeholder","shoppingList","retrieveBooksFromLS","arrayLS","promises","id","response","responseData","renderData","error","dataArray","markup","book","button","bookId","removeFromShoppingList","card","updateCardView","updatedBooks","book_id","isCardEmpty","supportBlock"],"mappings":"4EAAA,MAAeA,EAAA,8DCAAC,EAAA,8DCAAC,EAAA,6DCATC,EAAM,6CAMNC,EAAc,SAAS,cAAc,4BAA4B,EACjEC,EAAe,SAAS,cAAc,uBAAuB,EAEnE,eAAeC,GAAsB,CACnC,GAAI,CACF,MAAMC,EAAU,KAAK,MAAM,aAAa,QAAQ,SAAS,CAAC,GAAK,GAC/D,GAAI,CAACA,GAAWA,EAAQ,SAAW,EAAG,CACpC,QAAQ,IAAI,kCAAkC,EAC9C,MACD,CAED,MAAMC,EAAWD,EAAQ,IAAI,MAAME,GAAM,CACvC,MAAMC,EAAW,MAAM,MAAM,GAAGP,CAAG,IAAIM,CAAE,EAAE,EAC3C,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,gCAAgCD,CAAE,EAAE,EAEtD,OAAOC,EAAS,MACtB,CAAK,EACKC,EAAe,MAAM,QAAQ,IAAIH,CAAQ,EAC/CI,EAAWD,CAAY,CACxB,OAAQE,EAAO,CACd,QAAQ,MAAM,SAAUA,EAAM,OAAO,CACtC,CACH,CAEA,SAASD,EAAWE,EAAW,CAC7B,GAAIA,EAAU,SAAW,EAAG,CAC1BV,EAAY,MAAM,QAAU,QAC5B,MACD,CACD,MAAMW,EAASD,EACZ,IAAIE,GACI;AAAA;AAAA,oBAEOA,EAAK,UAAU;AAAA;AAAA,mCAEAA,EAAK,KAAK;AAAA,qCACRA,EAAK,SAAS;AAAA,wCACXA,EAAK,WAAW;AAAA,mCACrBA,EAAK,MAAM;AAAA;AAAA;AAAA,mBAG3BA,EAAK,UAAU,CAAC,EAAE,GAAG;AAAA;AAAA,yBAEfhB,CAAM;AAAA;AAAA;AAAA,mBAGZgB,EAAK,UAAU,CAAC,EAAE,GAAG;AAAA;AAAA,yBAEff,CAAS;AAAA;AAAA;AAAA;AAAA,8BAIJe,EAAK,GAAG;AAAA;AAAA;AAAA,yBAGbd,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,KAMzB,EACA,KAAK,EAAE,EAEVG,EAAa,mBAAmB,YAAaU,CAAM,EAC/CD,EAAU,SAAW,EACvBV,EAAY,MAAM,QAAU,QAE5BA,EAAY,MAAM,QAAU,OAGZ,SAAS,iBAAiB,aAAa,EAE/C,QAAQa,GAAU,CAC1BA,EAAO,iBAAiB,QAAS,IAAM,CACrC,MAAMC,EAASD,EAAO,aAAa,cAAc,EACjDE,EAAuBD,CAAM,EAE7B,MAAME,EAAOH,EAAO,QAAQ,OAAO,EAC/BG,GACFA,EAAK,OAAM,EAGbC,GACN,CAAK,CACL,CAAG,CACH,CACAf,IAEA,SAASa,EAAuBD,EAAQ,CACtC,MAAMX,EAAU,KAAK,MAAM,aAAa,QAAQ,SAAS,CAAC,GAAK,GAE/D,GAAI,CAACA,GAAWA,EAAQ,SAAW,EACjC,OAGF,MAAMe,EAAef,EAAQ,OAAOgB,GAAWA,IAAYL,CAAM,EACjE,aAAa,QAAQ,UAAW,KAAK,UAAUI,CAAY,CAAC,CAC9D,CAEA,SAASE,GAAc,CAErB,OADqB,SAAS,cAAc,uBAAuB,EAC/C,SAAS,SAAW,CAC1C,CAEA,SAASH,GAAiB,CACxB,MAAMI,EAAe,SAAS,cAAc,kBAAkB,EAE1DD,EAAW,GACbpB,EAAY,MAAM,QAAU,QAC5BqB,EAAa,MAAM,QAAU,UAE7BrB,EAAY,MAAM,QAAU,OAC5BqB,EAAa,MAAM,QAAU,QAEjC,CACAJ,EAAgB"}